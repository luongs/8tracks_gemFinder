<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>8 tracks Gem Finder</title>
        <meta name="description" content="Looks up gem certified mixes within 8tracks using the site's API">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type=text/css href="{{ url_for('static', filename='css/main.css')}}">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <div id="left_nav">
        <h2> 8 Tracks Gem Finder </h2>
        <h4> Enter tags </h4> 
        <h5> Add '+' to add multiple tags</h5>
        <form action='/' method="POST">
        {% if session['query'] %}
        <input name="queryBox" id="queryBox" placeholder="eg: korean + instrumental" value={{session['query'] | e}}> </input><br/>
        {% else %}
        <input name="queryBox" id="queryBox" placeholder="eg: korean + instrumental" value=""> </input><br/>
        {% endif %}

        <h4 style> Certification </h4>
        {% if session['gem'] %}
            {% set diamond = [] %}
            {% set platinum = [] %}
            {% set gold = [] %}
            {% set gem = [] %}
            
            {# Checks session value saving of certification checkboxes #}
            {% for value in session['gem'] %}
                {% if value == 'diamond' %}
                    {% if diamond.append(1) %}
                    {% endif %}
                {% endif %}
                {% if value == 'platinum' %}
                    {% if platinum.append(1) %}
                    {% endif %}
                {% endif %}
                {% if value == 'gold' %}
                    {% if gold.append(1) %}
                    {% endif %}
                {% endif %}
                {% if value == 'gem' %}
                    {% if gem.append(1) %}
                    {% endif %}
                {% endif %}
            {% endfor %}

            {# Sets checkboxes depending on users choice#}
            {% if not diamond %}
                Diamond <input type="checkbox" name="certification" value="diamond"><br />
            {% else %}
                Diamond <input type="checkbox" name="certification" value="diamond" checked><br />
            {% endif %}
            {% if not platinum %}
                Platinum <input type="checkbox" name="certification" value="platinum"><br />
            {% else %}
                 Platinum <input type="checkbox" name="certification" value="platinum" checked><br />
            {% endif %}
            {% if not gold %}
                Gold <input type="checkbox" name="certification" value="gold"><br />
            {% else %}
                    Gold <input type="checkbox" name="certification" value="gold" checked><br />                
            {% endif %}
            {% if not gem %}
                 Gem <input type="checkbox" name="certification" value="gem"><br />
            {% else %}
                Gem <input type="checkbox" name="certification" value="gem" checked><br />
            {% endif %}

        {% else %}
            Diamond <input type="checkbox" name="certification" value="diamond"><br />
            Platinum <input type="checkbox" name="certification" value="platinum" checked><br />
            Gold <input type="checkbox" name="certification" value="gold"><br />
            Gem <input type="checkbox" name="certification" value="gem"><br />
        {% endif %}
        <input type="submit" value="Submit">
        </form>
    </div>
    <div id="mid_nav">
        <table class="result_table">
        {% if dictionary_list %}
            {% for node in dictionary_list %}
                {% for key, value in node.iteritems() %}
                    <tr style={padding:5px}>
                        {% if key == 'image' %}
                            <td><img src={{ value }} alt="mix_cover"></td>
                        {% elif key == 'path' %}
                            <td><a href={{ "http://8tracks.com"+value }} target="_blank">Link</a></td>
                        {% else %}
                            <th>{{ key }}</td>
                            <td>{{ value }}</td>
                        {% endif %}
                    </tr>    
                {% endfor %}
            {% endfor %}
        {% endif %}
        </table>
    </div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>
    </body>
</html>
